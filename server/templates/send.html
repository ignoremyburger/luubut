{% extends 'base.html' %}
{% block head %}
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://luubut.lol/" />
    <meta property="og:title" content="LÆ°u BÃºt - Ä‘á»ƒ láº¡i lÆ°u bÃºt Ä‘Ã¡ng nhá»› cho báº¡n bÃ¨" />
    <meta property="og:description" content="LÆ°u BÃºt - Ä‘á»ƒ láº¡i lÆ°u bÃºt Ä‘Ã¡ng nhá»› cho báº¡n bÃ¨" />
    <meta property="og:image" content="{{ current_user.profile_picture }}" />
    <!-- Twitter -->
    <meta property="twitter:type" content="website" />
    <meta property="twitter:url" content="https://luubut.lol/" />
    <meta property="twitter:title" content="LÆ°u BÃºt - Ä‘á»ƒ láº¡i lÆ°u bÃºt Ä‘Ã¡ng nhá»› cho báº¡n bÃ¨" />
    <meta property="twitter:description" content="LÆ°u BÃºt - Ä‘á»ƒ láº¡i lÆ°u bÃºt Ä‘Ã¡ng nhá»› cho báº¡n bÃ¨" />
    <meta property="twitter:image" content="{{ current_user.profile_picture }}" />
{% endblock %}
{% block body %}
<div class="m-auto p-4 rounded mt-5 bg-white shadow-sm border text-center" style="width: fit-content">
    <h4 class="fw-bold">ğŸ«¶ğŸ» HÃ£y gá»­i má»™t thÃ´ng Ä‘iá»‡p Ã½ nghÄ©a tá»›i ğŸ’–</h4>
    <div id="profile-container" class="mb-3">
        <img src="{{ user.profile_picture }}" style="width: 100px; height: 100px; border-radius: 50%">
        <h4 class="fw-bold" style="color: #4f46e5">{{ user.username }}</h4>
    </div>
    <form method="POST" action="/send/{{ user.username }}" id="note-form">
        {{ form.csrf_token() }}
        <div class="form-group mb-3">
            {{ form.note_sender(class="form-control", placeholder="TÃªn cá»§a báº¡n (khÃ´ng nháº¥t thiáº¿t pháº£i lÃ  tÃªn tháº­t nhÃ©!)") }}
        </div>
        <div class="form-group mb-3">
            {{ form.note_content(class="form-control", placeholder="Ná»™i dung lÆ°u bÃºt") }}
        </div>
        <button type="submit" class="btn btn-primary w-100 d-flex justify-content-center align-items-center" id="note-send-button">Gá»­i</button>
    </form>
</div>
<script>
    const noteForm = document.getElementById('note-form');
    const noteFormbutton = document.getElementById('note-send-button');

    noteForm.addEventListener('submit', (e) => {
        e.preventDefault();
        noteFormbutton.disabled = true;
        noteFormbutton.innerHTML = `
        <div class="spinner-border mx-1" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
        <p class="m-0 mx-1">Äang gá»­i</p>
        `;
        noteForm.submit();
    })
</script>
{% endblock %}